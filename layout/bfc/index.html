<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/css-guidebook/umi.css" />
    <script>
      window.routerBase = "/css-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.19
    </script>
    <title>BFC</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/css-guidebook-favicon.png&#x27;)" href="/css-guidebook//">CSS Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/css-guidebook//concept">基础</a><a aria-current="page" class="active" href="/css-guidebook//layout">布局</a><a href="/css-guidebook//engineering">工程化</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/css-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/css-guidebook-favicon.png&#x27;)" href="/css-guidebook//"></a><h1>CSS Guidebook</h1><p>CSS 完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/css-guidebook//concept">基础</a></li><li><a aria-current="page" class="active" href="/css-guidebook//layout">布局</a></li><li><a href="/css-guidebook//engineering">工程化</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/css-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/css-guidebook//layout/box-model">盒模型</a></li><li><a aria-current="page" class="active" href="/css-guidebook//layout/bfc">BFC</a></li><li><a href="/css-guidebook//layout/basic">基础布局</a><ul><li><a href="/css-guidebook//layout/basic/clear-float"><span>清除浮动</span></a></li><li><a href="/css-guidebook//layout/basic/flexible-box-layout"><span>弹性布局</span></a></li><li><a href="/css-guidebook//layout/basic/flexible-box-layout-practise"><span>弹性布局 - 应用</span></a></li></ul></li><li><a href="/css-guidebook//layout/centered">居中布局</a><ul><li><a href="/css-guidebook//layout/centered/center-horizontally"><span>水平居中</span></a></li><li><a href="/css-guidebook//layout/centered/center-vertically"><span>垂直居中</span></a></li><li><a href="/css-guidebook//layout/centered/center-both-vertically-and-horizontally"><span>水平垂直居中</span></a></li></ul></li><li><a href="/css-guidebook//layout/multi-columns">多栏布局</a><ul><li><a href="/css-guidebook//layout/multi-columns/double-columns-layout"><span>双栏布局</span></a></li><li><a href="/css-guidebook//layout/multi-columns/three-columns-layout"><span>三栏布局</span></a></li><li><a href="/css-guidebook//layout/multi-columns/multi-columns-layout"><span>多栏布局</span></a></li></ul></li><li><a href="/css-guidebook//layout/grid">网格布局</a><ul><li><a href="/css-guidebook//layout/grid/grid"><span>网格布局</span></a></li><li><a href="/css-guidebook//layout/grid/explicit"><span>显式网格属性</span></a></li><li><a href="/css-guidebook//layout/grid/implicit"><span>隐式网格属性</span></a></li><li><a href="/css-guidebook//layout/grid/terminology"><span>网格布局术语</span></a></li><li><a href="/css-guidebook//layout/grid/application"><span>网格布局应用</span></a></li></ul></li><li><a href="/css-guidebook//layout/responsive-layout">响应式设计和布局</a></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="原理" data-depth="2" class=""><a href="/css-guidebook//layout/bfc#原理"><span>原理</span></a></li><li title="实现方法" data-depth="2" class=""><a href="/css-guidebook//layout/bfc#实现方法"><span>实现方法</span></a></li><li title="使用场景" data-depth="2" class=""><a href="/css-guidebook//layout/bfc#使用场景"><span>使用场景</span></a></li><li title="解决边距重叠问题" data-depth="3" class=""><a href="/css-guidebook//layout/bfc#解决边距重叠问题"><span>解决边距重叠问题</span></a></li><li title="清除浮动" data-depth="3" class=""><a href="/css-guidebook//layout/bfc#清除浮动"><span>清除浮动</span></a></li><li title="侵占浮动元素的位置" data-depth="3" class=""><a href="/css-guidebook//layout/bfc#侵占浮动元素的位置"><span>侵占浮动元素的位置</span></a></li><li title="避免文字环绕" data-depth="3" class=""><a href="/css-guidebook//layout/bfc#避免文字环绕"><span>避免文字环绕</span></a></li><li title="多列布局设定" data-depth="3" class=""><a href="/css-guidebook//layout/bfc#多列布局设定"><span>多列布局设定</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="bfc"><a aria-hidden="true" href="#bfc"><span class="icon icon-link"></span></a>BFC</h1><p>块级格式化上下文（Block Fromatting Context，BFC），指一个隔离的独立的块级渲染区域，是 Web 页面的可视化 CSS 渲染的一部分，是布局过程中生成块级盒子的区域，也是浮动元素与其他元素的交互限定区域。</p><blockquote><p>相关：IFC 为内联元素格式化上下文</p></blockquote><h2 id="原理"><a aria-hidden="true" href="#原理"><span class="icon icon-link"></span></a>原理</h2><p>内部的元素会在垂直方向一个接一个地排列，可以理解为是 BFC 中的一个常规流。</p><p>每个元素的左外边距与包含块的左边界相接触（从左往右，否则相反），即使存在浮动也是如此，这说明 BFC 的子元素不会超出它的包含块</p><ol><li>在 BFC 的垂直方向上，边距会发生重叠</li><li>BFC 区域不会与浮动区域重叠</li><li>BFC 在页面上是一个隔离的独立容器，与容器外的其他元素互不影响</li><li>计算 BFC 高度时，浮动子元素也会参与计算</li></ol><h2 id="实现方法"><a aria-hidden="true" href="#实现方法"><span class="icon icon-link"></span></a>实现方法</h2><ol><li>根元素默认创建 BFC</li><li>浮动元素（元素 <code>float</code> 不为 <code>none</code>）</li><li>绝对定位元素（元素 <code>position</code> 为 <code>absolute</code> 或 <code>fixed</code>）</li><li>行内块元素（元素 <code>display</code> 为 <code>inline-block</code>）</li><li>表格单元格（元素 <code>display</code> 为 <code>table-cell</code>，HTML 表格单元格默认为该值）</li><li>表格标题（元素 <code>display</code> 为 <code>table-caption</code>，HTML 表格标题默认该值）</li><li>匿名表格单元格元素（<code>display</code> 值是 <code>table</code>、<code>table-row</code>、<code>table-row-group</code>、<code>table-header-group</code>、<code>table-footer-group</code>）</li><li><code>overflow</code> 值不为 <code>visible</code></li><li>弹性元素（<code>display</code> 为 <code>flex</code> 或 <code>inline-flex</code> 元素的直接子元素）</li><li>网格元素（<code>display</code> 为 <code>grid</code> 或 <code>inline-grid</code> 元素的直接子元素）</li></ol><h2 id="使用场景"><a aria-hidden="true" href="#使用场景"><span class="icon icon-link"></span></a>使用场景</h2><h3 id="解决边距重叠问题"><a aria-hidden="true" href="#解决边距重叠问题"><span class="icon icon-link"></span></a>解决边距重叠问题</h3><p>当相邻元素都设置了 <code>margin</code> 边距时，重叠边缘的 <code>margin</code> 会塌陷到其中的最大值，这种情况称作外边距折叠（Collapsing Margins）。</p><p><strong>折叠结果的规则计算：</strong></p><ul><li>两个相邻的外边距都是正数时，折叠结果是它们两者之间较大的值。</li><li>两个相邻的外边距都是负数时，折叠结果是两者绝对值的较大值。</li><li>两个外边距一正一负时，折叠结果是两者的相加的和。</li></ul><p>这种情况产生的根本原理就是两个相邻的元素均处于同一个 BFC，符合属于同一个 BFC 的两个相邻元素的 <code>margin</code> 会发生重叠的规则。</p><p>为了不让边距重叠，可以给子元素加一个父元素，并设置该父元素为 BFC。</p><h3 id="清除浮动"><a aria-hidden="true" href="#清除浮动"><span class="icon icon-link"></span></a>清除浮动</h3><p>浮动元素是会脱离文档流的（绝对定位元素会脱离文档流）。如果一个没有高度或者 <code>height</code> 是 <code>auto</code> 的容器的子元素是浮动元素，则该容器的高度是不会被撑开的。我们通常会利用伪元素（<code>:after</code> 或者 <code>:before</code>）来解决这个问题。BFC 能包含浮动，也能解决容器高度不会被撑开的问题。</p><p>通过给浮动元素的父元素设置 <code>overflow: hidden</code> 可以清除子元素的浮动。</p><p>当在父元素中设置 <code>overflow: hidden</code> 就会触发 BFC，所以其他内部的元素就不会影响外面的布局，BFC 就把浮动的子元素高度当做了自身内部的高度去处理溢出。</p><h3 id="侵占浮动元素的位置"><a aria-hidden="true" href="#侵占浮动元素的位置"><span class="icon icon-link"></span></a>侵占浮动元素的位置</h3><p>设置元素为浮动元素后，浮动元素会脱离文档流，然后浮盖在文档流元素上。</p><p>为非浮动元素设置 BFC 环境，根据 BFC 的不与浮动元素重叠的规则，解决了侵占元素问题。</p><p>在两栏布局中，对比我们常规为非浮动元素或非定位元素设置 <code>margin</code> 挤开的方法，其优点在于不需要去知道浮动或定位元素的宽度。</p><h3 id="避免文字环绕"><a aria-hidden="true" href="#避免文字环绕"><span class="icon icon-link"></span></a>避免文字环绕</h3><p><code>p</code> 元素没有移位但它叠在了浮动元素之下，而 <code>p</code> 元素的文本（行盒子）却移位了，行盒子水平变窄来给浮动元素腾出了空间。随着文本的增加，最后文本将环绕在浮动元素之下，因为那时候行盒子不再需要移位。</p><p>为 <code>p</code> 元素创建一个新的 BFC 那它就不会再紧贴包含块的左侧了。</p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="&lt;div class=&quot;container&quot;&gt;
    &lt;div class=&quot;floated&quot;&gt;
        Floated div
    &lt;/div&gt;
    &lt;p&gt;
        Quae hic ut ab perferendis sit quod architecto,
        dolor debitis quam rem provident aspernatur tempora
        expedita.
    &lt;/p&gt;
&lt;/div&gt;
" data-status="copy"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag"> </span><span class="token tag attr-name">class</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">container</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag"> </span><span class="token tag attr-name">class</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">floated</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        Floated div</span></div><div class="token-line"><span class="token plain">    </span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token tag punctuation">&lt;</span><span class="token tag">p</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        Quae hic ut ab perferendis sit quod architecto,</span></div><div class="token-line"><span class="token plain">        dolor debitis quam rem provident aspernatur tempora</span></div><div class="token-line"><span class="token plain">        expedita.</span></div><div class="token-line"><span class="token plain">    </span><span class="token tag punctuation">&lt;/</span><span class="token tag">p</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="多列布局设定"><a aria-hidden="true" href="#多列布局设定"><span class="icon icon-link"></span></a>多列布局设定</h3><p>如果我们创建一个占满整个容器宽度的多列布局，在某些浏览器中最后一列有时候会掉到下一行。这可能是因为浏览器四舍五入了列宽从而所有列的总宽度会超出容器。但如果我们在多列布局中的最后一列里创建一个新的 BFC，它将总是占据其他列先占位完毕后剩下的空间。</p><p><strong>示例</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="&lt;div class=&quot;container&quot;&gt;
    &lt;div class=&quot;column&quot;&gt;Column 1&lt;/div&gt;
    &lt;div class=&quot;column&quot;&gt;Column 2&lt;/div&gt;
    &lt;div class=&quot;column&quot;&gt;Column 3&lt;/div&gt;
&lt;/div&gt;
" data-status="copy"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag"> </span><span class="token tag attr-name">class</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">container</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag"> </span><span class="token tag attr-name">class</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">column</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token plain">Column 1</span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag"> </span><span class="token tag attr-name">class</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">column</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token plain">Column 2</span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag"> </span><span class="token tag attr-name">class</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">column</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token plain">Column 3</span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><div class="__dumi-default-code-block"><pre class="prism-code language-css"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text=".column {
    width: 31.33%;
    background-color: green;
    float: left;
    margin: 0 1%;
}
/*  Establishing a new block formatting
    context in the last column */
.column:last-child {
    float: none;
    overflow: hidden;
}
" data-status="copy"></button><div class="token-line"><span class="token selector class">.column</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">width</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">31.33</span><span class="token unit">%</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">background-color</span><span class="token punctuation">:</span><span class="token plain"> green</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">float</span><span class="token punctuation">:</span><span class="token plain"> left</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">margin</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">1</span><span class="token unit">%</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">/*  Establishing a new block formatting</span></div><div class="token-line"><span class="token comment">    context in the last column */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token selector class">.column</span><span class="token selector pseudo-class">:last-child</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">float</span><span class="token punctuation">:</span><span class="token plain"> none</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">overflow</span><span class="token punctuation">:</span><span class="token plain"> hidden</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><hr/><p><strong>参考资料：</strong></p><ul><li><a href="https://www.cnblogs.com/libin-1/p/7098468.html" target="_blank" rel="noopener noreferrer">📝 什么是 BFC<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/css-guidebook/edit/master/docs/layout/bfc.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">9/4/2020, 6:40:59 PM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/css-guidebook/umi.js"></script>
    <script src="/css-guidebook/docs__layout__bfc.md.js"></script>
  </body>
</html>
